<div class="container">
  <div class="row">
    <div class="col-sm-4 offset-sm-4 search_results">
      <div class="my-2">
      <% if params[:query].present? %>
        <a href="#">Mexico City</a> > <a href="#"><%= params[:query] %></a>
      <% else %>
        <a href="#">Mexico City</a> > <a href="#">All food types</a>
      <% end %>
      </div>

      <% if @search_results.present? %>
      <div
           class="mb-3"
           id="map"
           style="width: 100%; height: 400px;"
           data-markers="<%= @markers.to_json %>"
           data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>

      <% distance_value = 0 %>
      <% @search_results.each do |result| %>

      <div class="search-card">
          <div class="d-flex justify-content-between">
            <div>
              <%= link_to result.name, food_stall_path(result) %> <br>
              <% result.rating.times do %>
                ⭐️
              <% end %>

              <% if result.reviews.count == 0 %>
                <span style="font-size: 16px; color: #484848;">No reviews yet</span>
              <% elsif result.reviews.count == 1 %>
                <span>1 review</span>
              <% else %>
                <span><%= result.reviews.count %> reviews</span>
              <% end %>
              <p style="margin: 0px; padding:0px; color: #4E4C54"><%= result.main_category %></p>
              <p style="margin: 0px; padding:0px; color: #4E4C54; font-size:10px;"><%= result.address %></p>
            </div>
            <p style="font-size: 14px;"><%= @distances_array[distance_value] %> km | <%= (@time_array[distance_value] / 60).round(0) %> min walk‍</p>
            <% distance_value += 1 %>

          </div>
      </div>
      <% end %>
      <% else %>
      <h1>No results found</h1>
      <% end %>
    </div>
  </div>
</div>


<%= javascript_pack_tag 'mapbox' %>



