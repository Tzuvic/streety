<div class="container">
  <div class="row">
    <div class="col-sm-4 offset-sm-4 search_results">
      <div class="my-2">
      <% if params[:query].present? %>
        <a href="#">Mexico City</a> > <a href="#"><%= params[:query] %></a>
      <% else %>
        <a href="#">Mexico City</a> > <a href="#">All food types</a>
      <% end %>
      </div>
    </div>
  </div>
</div>

<% if @search_results.present? %>
  <div
     class="mb-3"
     id="map"
     style="width: 100%; height: 320px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

<div class="container">
  <div class="row">
    <div class="col-sm-4 offset-sm-4 search_results">
      <% list_counter = 1 %>
      <% distance_value = 0 %>
      <hr>

      <% @search_results.each do |result| %>

        <div class="search-card mb-3">
          <% if result.photos.attached? %>
            <div class="mb-2 mt-1">
              <% result.photos.take(5).each do |photo| %>
                <%= cl_image_tag photo.key, size:"70x70", style:"border-radius: 6px;" %>
              <% end %>
            </div>
        <% end %>

        <div class="d-flex justify-content-start">
          <div style="font-size: 14px;" class="my-0 py-0">
<span style="font-size: 16px; color:#272727; font-weight: bold;"><%= list_counter %>. </span>

             <%= link_to result.name, food_stall_path(result), style:"font-size: 16px; color:#272727; font-weight: bold" %>



            <span id="distance-time-indicator"><%= @distances_array[distance_value] %> km | <%= (@time_array[distance_value] / 60).round(0) %> min walk‚Äç</span>

            <br>




              <% result.rating.times do %>
                <i class="fas fa-star star-color"></i>
              <% end %>

              <% if result.reviews.count == 0 %>
                <span style="font-size: 16px; color: #484848;">No reviews yet</span>
              <% elsif result.reviews.count == 1 %>
                <span>1 review</span>
              <% else %>
                <span><%= result.reviews.count %> reviews</span>
              <% end %>

              <p style="margin: 0px; padding:0px; color: #4E4C54"><%= result.main_category %></p>

              <p style="margin: 0px; padding:0px; color: #4E4C54; font-size:10px;"><%= result.address %></p>

            </div>

              <% list_counter += 1 %>
              <% distance_value += 1 %>
          </div>
      </div>
      <hr>
      <% end %>
    <% else %>
      <h1>No results found</h1>
    <% end %>
    </div>
  </div>
</div>


<%= javascript_pack_tag 'mapbox' %>



